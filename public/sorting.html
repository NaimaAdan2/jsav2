<!DOCTYPE html>
<html>
  <head>
    <title>sort</title>
    <h1> lol </h1>
    <link rel="stylesheet" href="../css/JSAV.css" type="text/css" media="screen" title="no title" charset="utf-8" />
    <style>
    #container {
      width: 100%;
      position: relative;
    }
    .jsavcounter {
      position: absolute;
      top: 15px;
    }
    .jsavcanvas { height: 150px; }
    </style>
  </head>
  <body>
  <div id="container">
    <div class="jsavcontrols"></div><span class="jsavcounter"></span>
    <p class="jsavoutput jsavline"></p>
    <div class="jsavcanvas"></div>
    <input id="userInput"></input>
    <button id="run"> run </button>
      </div>
  </div>
  <style>
  </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
    <script src="../lib/jquery.transit.js"></script>
    <script src="../lib/raphael.js"></script>
    <script src="../build/JSAV.js"></script>
    <script>

// this is for the run button 
  function run(){
    let runButton = document.getElementById("run")

    runButton.addEventListener("click", function() {
        let input = document.getElementById("userInput")
        let str = input.value;
        let arr = str.split(",");
        jsavFunction(arr);
    })
  }

// bubble sort with pseudocode 
  function jsavFunction(theArray){
    console.log(theArray)
    var jsav = new JSAV("container");
    var arr = jsav.ds.array(theArray, {layout: "bar"});
    var codeArr = [
        "for (i = 0; i < arr.size() - 1; i++) {",
        "   for (j = 1; j < arr.size() - i; j++) {",
        "       if (arr.value(j - 1) > arr.value(j)) {",
        "           arr.swap(j - 1, j);",
        "       }",
        "   }",
        "}",
        ]
    var code = jsav.code(codeArr)
    var i, j;
    arr.highlight(0);
    jsav.umsg("For each pass, we will move left to right swapping adjacent elements as needed. Each pass moves the next largest element into its final position (these will be shown in lighter color).");
    jsav.step();
    for (i = 0; i < arr.size() - 1; i++) {
        jsav.umsg("Starting pass " + i);
        //sets the line at given index as the current line
        code.setCurrentLine(1);
        jsav.step();
        jsav.umsg("For each element moving through the list");
        code.setCurrentLine(2);
        jsav.step();
        for (j = 1; j < arr.size() - i; j++) {
             //sets the line at given index as the current line
            code.setCurrentLine(3);
            // highlight codelines at give indes
            arr.highlight(j);
            jsav.umsg("It is time to compare elements");
            jsav.step();
            if (arr.value(j - 1) > arr.value(j)) {
                jsav.umsg("It is time to swap");
                code.setCurrentLine(4);
                //Swaps the values of the two array positions
                arr.swap(j - 1, j);
                jsav.step();
            }
            arr.unhighlight(j - 1);
        }
        arr.unhighlight(j - 1);
        jsav.umsg("Done this pass");
        jsav.step();
    }
    jsav.umsg("It is done sorting!");
    jsav.step();
    jsav.recorded();
};
    
// this executed the "run" button
    run()
    </script>
  </body>
</html>
